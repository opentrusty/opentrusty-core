{
    # Global options
    auto_https off
}

# Common proxy headers for OpenTrusty
(proxy_headers) {
    header_up Host {host}
    header_up X-Real-IP {remote_host}
    header_up X-Forwarded-For {remote_host}
    header_up X-Forwarded-Proto {scheme}
}

# OpenTrusty Auth Plane (Data Plane)
auth.yourdomain.com {
    reverse_proxy localhost:8080 {
        import proxy_headers
    }
}

# OpenTrusty Admin Plane (Control Plane API)
admin.yourdomain.com {
    reverse_proxy localhost:8081 {
        import proxy_headers
    }
}

# OpenTrusty Control Panel (UI Console)
console.yourdomain.com {
    reverse_proxy localhost:3000 {
        import proxy_headers
    }
}
